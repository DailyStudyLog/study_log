
amazon s3

Amazon Simple Storage Service라는 인터넷용 스토리지 서비스.

단순하고 강력한 웹 ui를 통해 언제 어디서나 원하는 양의 데이터를 저장하고 검색할 수 있고 높은 확장성과 신뢰성을 갖춘 빠르고 경제적인 데이터 스토리지 인프라에 엑세스 할 수 있습니다.

주요 기능

- 짧은 지연 시간 및 높은 처리량 성능
- 여러 가용 영역에 걸쳐 99.99999999%의 객체 내구성을 제공하도록 설계
- 전체 가용 영역에 영향을 미치는 이벤트에 대한 복원력
- 연간 99.99%의 가용성을 제공하도록 설계
- Amazon S3 서비스 수준 계약에 따라 가용성 보장
- 전송 데이터를 위한 SSL 및 저장 데이터의 암호화 지원
- 다른 S3 스토리지 클래스로 객체를 자동으로 마이그레이션하기 위한 S3 수명 주기 관리

장점

- 버킷 만들기 
	- 데이터를 저장하는 버킷을 만들고 해당 버킷의 이름을 저장합니다. 
	- 버킷은 데이터 스토리지를 위한 Amazon S3의 기본 컨테이너입니다.
- 데이터 저장
	- 버킷에 데이터를 무한정으로 저장합니다.
	- Amazon S3 버킷에 객체를 원하는 만큼 업로드할 수 있으며, 각 객체에 최대 5TB의 데이터를 포함할 수 있습니다.
	- 각 객체는 고유한 개발자 할당 키를 사용하여 저장 및 검색합니다.
- 데이터 다운로드 
	- 데이터를 직접 다운로드하거나 다른 사람이 다운로드할 수 있도록 합니다.
	- 언제든지 데이터를 직접 다운로드하거나 다른 사람이 다운로드할 수 있도록 허용할 수 있습니다.
- 권한 
	- 데이터를 Amazon S3 버킷으로 업로드 또는 다운로드하려는 사용자에게 엑세스 권한을 부여하거나 해당 권한을 거부합니다.
	- 3가지 유형의 사용자에게 업로드 및 다운로드 권한을 부여할 수 있습니다.
	- 인증 메커니즘을 사용하면 데이터가 무단으로 엑세스되지 않도록 보호하는데 도움이 될 수 있습니다.
- 표준 인터페이스
	- 모든 인터넷 개발 도구 키트에서 사용할 수 있도록 설계된 표준 기반 REST 및 SOAP 인터페이스를 사용합니다.

개념

`버킷`
- Amazon S3에 저장된 객체에 대한 컨테이너입니다. 모든 객체는 어떤 버킷에 포함됩니다.

버킷은 다음과 같은 여러 가지 용도로 사용됩니다.
- Amazon S3의 네임스페이스를 최상위 수준으로 구성합니다.
- 스토리지 및 데이터 전송 요금을 담당하는 계정을 식별합니다.
- 엑세스 제어에 사용됩니다.
- 사용량 보고를 위한 집계 단위로 사용됩니다.

> 버킷은 리전에 종속적이며 특정 리전에 버킷을 생성해야 합니다.

`객체`
- Amazon S3에 저장되는 기본 개체입니다.
- 객체는 객체 데이터와 메타데이터로 구성됩니다.
- 데이터 부분은 Amazon S3에서 볼 수 없습니다.
- 메타데이터는 객체를 설명하는 이름-값 페어의 집합입니다.
	- 마지막으로 수정한 날짜와 같은 몇 가지 기본 메타데이터 및 Content-Type 같은 표준 HTTP 메타데이터가 포함됩니다.
	- 객체를 저장할 때 사용자 정의 메타데이터를 추가할 수도 있습니다.
- 객체는 키(이름)및 버전 ID를 통해 버킷 내에서 고유하게 식별됩니다.

`키`
- 버킷 내 객체의 고유한 식별자입니다. 
- 버킷 내 모든 객체는 정확히 하나의 키를 갖습니다.
	- 버킷, 키 및 버전 ID의 조합은 각 객체를 고유하게 식별합니다.
	- 이렇기 때문에 S3을 "버킷 + 키 + 버전"과 객체 자체 사이의 기본 데이터 맵이라고 여길 수도 있습니다.
- S3의 모든 객체는 웹 서비스 엔드포인트, 버킷 이름, 키 , 버전의 조합을 통해 고유한 주소를 지정할 수 있습니다.

`Region`
- 사용자가 만드는 버킷을 저장할 지리적 AWS 리전을 선택할 수 있습니다.
- 지연 시간 최적화, 비용 최소화, 규정 요구 사항 준수 등 다양한 필요에 따라 리전을 선택할 수 있습니다.
- 특정 리전에 저장된 객체는 명시적으로 옮기지 않는 한 해당 리전을 벗어나지 않습니다.

1. `S3 스토리지 클래스`

- S3 Standard
	- 기본 스토리지 클래스이며 객체를 업로드할 때 스토리지 클래스를 지정하지 않으면 자동으로 S3 Standard 스토리지 클래스를 할당합니다.
- Reduced Redundancy 
	- RRS(Reduced Redundancy Storage) 스토리지 클래스는 S3 Standard 스토리지 클래스보다 더 적은 중복성으로 저장될 수 있으며 주요하지 않고 재현 가능한 데이터용으로 설계되었습니다.

2. 엑세스 빈도에 따라 객체를 자동으로 최적화하는 스토리지 클래스

- S3 Intelligent-Tiering 
	- 성능 영향 또는 운영 오버헤드 없이 가장 비용 효율적인 스토리지 액세스 계층으로 데이터를 자동으로 이동하여 스토리지 비용을 최적화하도록 설계되었습니다.
	- 엑세스 패턴이 변경될 때 자주 엑세스하는 계층과 저렴한 비용의 자주 엑세스하지 않는 계층 간 세분화된 객체 수준의 데이터를 이동함으로써 자동 비용 절감 효과를 제공합니다.
	- 엑세스 패턴을 알 수 없거나 예측할 수 없어 수명이 긴 데이터에 대해 스토리지 비용을 자동으로 최적화하려는 경우 이상적입니다.
	- Amazon S3는 객체당 소액의 월별 모니터링 및 자동화 요금으로 이 클래스에서 객체의 액세스 패턴을 모니터링하고 연속 30일 동안 액세스하지 않은 객체를 자주 액세스하지 않는 계층으로 이동합니다.
	- 검색할때 검색 요금은 없지만 빈번하지 않은 계층에 엑세스하면 자동으로 빈번한 계층으로 이동하는데 계층 간 이동에 계층화 요금이 추가로 적용되지는 않습니다.

### terraform으로 s3 생성하기

provider "aws" {
	region = "ap-northeast-2"
}

resource "aws_s3_bucket" "s3" {
	bucket = "iac-terraform-s3-test"

	tags = {
		Name = "iac-terraform-s3-test"
	}
}  
